pipeline {
  agent {
    kubernetes {
      yaml '''
        apiVersion: v1
        kind: Pod
        spec:
          containers:
          - name: maven
            image: hnouri86/mavenassur:1.0.20240127
            command:
            - cat
            tty: true
        '''
    }
  }
  stages {
    stage('Run maven version') {
      steps {
        container('maven') {
          sh 'mvn --version'
          sh ' echo Hello World'

        }
      }
    }
    stage('code review to check quality of code') {
      steps {
        container('maven') {
          sh 'mvn pmd:pmd'
          sh 'echo code review done'

        }
      }
    }
    stage('Run maven') {
      steps {
        container('maven') {
          sh ' echo Hello World'
          sh 'mvn clean package'


        }
      }
    }
  }
}